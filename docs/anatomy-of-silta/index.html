<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/silta/blog/rss.xml" title="Silta Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/silta/blog/atom.xml" title="Silta Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Silta" href="/silta/opensearch.xml"><title data-react-helmet="true">Silta project build process | Silta</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Silta project build process | Silta"><meta data-react-helmet="true" name="description" content="A silta project requires two main configuration files, which give you the possibility to customize the behavior according to your requirements:"><meta data-react-helmet="true" property="og:description" content="A silta project requires two main configuration files, which give you the possibility to customize the behavior according to your requirements:"><meta data-react-helmet="true" property="og:url" content="https://silta.wunder.io/silta/docs/anatomy-of-silta"><link data-react-helmet="true" rel="shortcut icon" href="/silta/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://silta.wunder.io/silta/docs/anatomy-of-silta"><link rel="stylesheet" href="/silta/styles.152cdccf.css">
<link rel="preload" href="/silta/styles.749d1629.js" as="script">
<link rel="preload" href="/silta/runtime~main.ff27403d.js" as="script">
<link rel="preload" href="/silta/main.15a87802.js" as="script">
<link rel="preload" href="/silta/1.df1c1e86.js" as="script">
<link rel="preload" href="/silta/2.451d4a22.js" as="script">
<link rel="preload" href="/silta/28.9f32c8de.js" as="script">
<link rel="preload" href="/silta/31.b72e3071.js" as="script">
<link rel="preload" href="/silta/935f2afb.83ee4e54.js" as="script">
<link rel="preload" href="/silta/17896441.f83ef773.js" as="script">
<link rel="preload" href="/silta/d1e7b103.4e305683.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/silta/"><img src="/silta/img/logo.svg" alt="Wunder Silta" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/silta/img/logo.svg" alt="Wunder Silta" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/silta/docs/anatomy-of-silta">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wunderio/silta" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/silta/"><img src="/silta/img/logo.svg" alt="Wunder Silta" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/silta/img/logo.svg" alt="Wunder Silta" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/silta/docs/anatomy-of-silta">Docs</a></li><li class="menu__list-item"><a href="https://github.com/wunderio/silta" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Docs</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/silta/docs/anatomy-of-silta">Silta project build process</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/silta/docs/circleci-conf-examples">CircleCI configuration examples</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/silta/docs/creating-new-project">Creating a new project</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/silta/docs/deployment-workflow">Deployment workflow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/silta/docs/docker-images">Docker images</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/silta/docs/encrypting-sensitive-configuration">Encrypting sensitive configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/silta/docs/go-live-checklist">Go-live checklist</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/silta/docs/help-with-silta-dev">Helping with Silta development</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/silta/docs/key-components">Key components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/silta/docs/migrating-an-existing-drupal-project">Migrating an existing Drupal project</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/silta/docs/request-workflow">Request workflow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/silta/docs/silta-examples">Silta examples</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/silta/docs/troubleshooting">Troubleshooting</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Silta project build process</h1></header><div class="markdown"><p>A silta project requires two main configuration files, which give you the possibility to customize the behavior according to your requirements:</p><ul><li>A <a href="#circleci-configuration">CircleCI configuration file</a>. This defines how the application is built and tested.</li><li>A <a href="#silta-configuration">Silta configuration file</a>. This defines how the environment running your application is provisioned.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="circleci-configuration"></a>CircleCI configuration<a class="hash-link" href="#circleci-configuration" title="Direct link to heading">#</a></h2><p>This file is located in the project root at <code>.circleci/config.yml</code> and uses the official <a href="https://circleci.com/docs/2.0/configuration-reference/" target="_blank" rel="noopener noreferrer">CircleCI</a> structure. Here is the default content:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2.1</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">orbs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">silta</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> silta/silta@0.1</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">workflows</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">commit</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">silta/drupal-validate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> validate</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">post-validation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> echo &quot;You can add additional validation here</span><span class="token tag" style="color:#00009f">!&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">silta/drupal-build-deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token important">&amp;build</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deploy</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> build</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deploy</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">codebase-build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> silta/drupal</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">composer</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">install</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> silta/npm</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">install</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">build</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> global_nonprod</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">filters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">ignore</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> production</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">silta/drupal-build-deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic"># Extend the build-deploy configuration for the production environment.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">&lt;&lt;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token important">*build</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deploy</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> build</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deploy</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">prod</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">silta_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> silta/silta.yml</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">silta/silta</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">prod.yml</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> global_nonprod</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">filters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">only</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> production</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>There are quite a few things going on, let&#x27;s go through them one by one.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2.1</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>We use version 2.1 of the CircleCI API. If your project configured to use an older version, CircleCI will complain.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">orbs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">silta</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> silta/silta@0.1</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>CircleCI has a packaging system called <a href="https://circleci.com/docs/2.0/orb-intro/#section=configuration" target="_blank" rel="noopener noreferrer">orbs</a>.
We have published our own orb called <code>silta/silta</code>, which enables you to use predefined jobs and commands.</p><p>See available jobs in silta orb here: <a href="https://circleci.com/orbs/registry/orb/silta/silta" target="_blank" rel="noopener noreferrer">https://circleci.com/orbs/registry/orb/silta/silta</a></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">workflows</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">commit</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    jobs</span><span class="token punctuation" style="color:#393A34">:</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This is just the standard CircleCI declaration of what jobs are executed, and in what order.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">silta/drupal-validate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> validate</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">post-validation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> echo &quot;You can add additional validation here</span><span class="token tag" style="color:#00009f">!&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The validation job checks your codebase for things that can be done without a running environment, like <code>phpcs</code>.
You can adjust the phpcs configuration by editing phpcs.xml in your repository.
You can also add additional validation, like <code>eslint</code> by adding custom steps in the
<code>post-validation</code> section.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">silta/drupal-build-deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token important">&amp;build</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deploy</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> build</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deploy</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">codebase-build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> silta/drupal</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">composer</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">install</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> silta/npm</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">install</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">build</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> global_nonprod</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">filters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ignore</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> production</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This is the main build and deployment job (we run them together to keep things simple and fast).
The <code>&amp;build-deploy</code> is a yaml reference so we can reuse this content later on.</p><p><code>drupal-build-deploy</code> job is used for drupal chart deployments. There are more predefined jobs (i.e. <code>silta/frontend-build-deploy</code>, <code>silta/simple-build-deploy</code>) for other deployment jobs available in <a href="https://circleci.com/orbs/registry/orb/silta/silta" target="_blank" rel="noopener noreferrer">silta orb</a>.</p><p>The <code>codebase-build</code> parameter lets you specify how your project is built: by default we use two custom steps to
get php dependencies with composer and frontend dependencies with npm. </p><p>The <code>context</code> parameter gives your project access to certain environment variables.
In our case, these contain the credentials to connect to a specific kubernetes cluster.  </p><p>The <code>filters</code> section indicates that this job should not be run for the <code>production</code> branch.
This branch has a dedicated job configuration as we will see below.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">silta/drupal-build-deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Extend the build-deploy configuration for the production environment.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">&lt;&lt;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token important">*build</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deploy</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> build</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deploy</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">prod</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">silta_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> silta/silta.yml</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">silta/silta</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">prod.yml</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> global_nonprod</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">filters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">only</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> production</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This job reuses the previous job, it runs only for the production branch with the following differences:</p><ul><li>It has a different name.</li><li>It uses one additional silta configuration configuration file which contains production-specific configuration.</li><li>It can potentially deploy to a different cluster using different credentials.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="silta-configuration"></a>Silta-configuration<a class="hash-link" href="#silta-configuration" title="Direct link to heading">#</a></h2><p>The Silta configuration file is located in the Drupal root at <code>silta/silta.yml</code>, it is an instance of a Helm values file.
It overrides the default values of our Helm chart (<a href="https://github.com/wunderio/charts/blob/master/drupal/values.yaml" target="_blank" rel="noopener noreferrer">https://github.com/wunderio/charts/blob/master/drupal/values.yaml</a>)
and uses the same structure.</p><p>Here is a list of <a href="/silta/docs/silta-examples">sample configuration changes</a> for common requirements.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="additional-files"></a>Additional files<a class="hash-link" href="#additional-files" title="Direct link to heading">#</a></h2><p>There are a few additional files that often won&#x27;t need to be modified but which play an important role.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="dockerfiles"></a>Dockerfiles<a class="hash-link" href="#dockerfiles" title="Direct link to heading">#</a></h3><p>The <code>silta</code> folder contains three Dockerfiles for nginx, php and the shell container.
All of them are built simply by copying the codebase into the base docker image.</p><p>It would be possible to make modifications to the containers by modifying these Dockerfiles, or even to use different base images.
However, while this is very powerful it is quite likely that there is a better way to fulfill your needs using configuration. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="dockerignore"></a>.dockerignore<a class="hash-link" href="#dockerignore" title="Direct link to heading">#</a></h3><p>There are two <code>.dockerignore</code> files, one in the Drupal root (for the php and shell containers), and one in the web root (for nginx).
These specify which files should be ignored when creating project-specific Docker images, improving build time, image size and security. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="silta-production-configuration"></a>Silta production configuration<a class="hash-link" href="#silta-production-configuration" title="Direct link to heading">#</a></h3><p>This file is located in <code>silta/silta.prod.yml</code> and provides an additional level of override specifically for the production envrionment.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="settingssiltaphp"></a>settings.silta.php<a class="hash-link" href="#settingssiltaphp" title="Direct link to heading">#</a></h3><p>This file is actually not part of the repository, but gets mounted into the running container (replacing any existing file with that name).
It loads the database credential and additional Silta-specific configuration. You don&#x27;t need to modify it (you can&#x27;t), but you need to make sure
that it gets included from your settings.php.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="lando-configuration-file"></a>Lando configuration file<a class="hash-link" href="#lando-configuration-file" title="Direct link to heading">#</a></h3><p>This file is not actually needed to deploy a project to Silta, but it configures the project for
usage in local developemnt environments with Lando. Silta doesn&#x27;t specify how you should run your code locally, but Lando and Silta have compatible of working.</p><p>There is no plan to consolidate Silta and Lando, as they have very different requirements (for example Lando mounts the codebase as a volume, whereas Silta copies it into dedicated Docker images). </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="phpcsxml"></a>phpcs.xml<a class="hash-link" href="#phpcsxml" title="Direct link to heading">#</a></h3><p>This file is also not required for Silta, but we use phpcs for validation by default.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/wunderio/silta/tree/master/docs/anatomy_of_a_silta_project.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/silta/docs/circleci-conf-examples"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">CircleCI configuration examples »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#circleci-configuration" class="table-of-contents__link">CircleCI configuration</a></li><li><a href="#silta-configuration" class="table-of-contents__link">Silta-configuration</a></li><li><a href="#additional-files" class="table-of-contents__link">Additional files</a><ul><li><a href="#dockerfiles" class="table-of-contents__link">Dockerfiles</a></li><li><a href="#dockerignore" class="table-of-contents__link">.dockerignore</a></li><li><a href="#silta-production-configuration" class="table-of-contents__link">Silta production configuration</a></li><li><a href="#settingssiltaphp" class="table-of-contents__link">settings.silta.php</a></li><li><a href="#lando-configuration-file" class="table-of-contents__link">Lando configuration file</a></li><li><a href="#phpcsxml" class="table-of-contents__link">phpcs.xml</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/silta/docs/">Style Guide</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social presence</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.facebook.com/wunder.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/wunder.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin</a></li><li class="footer__item"><a href="https://twitter.com/Wunder_io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.instagram.com/wunder.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCsBoaJt5sX12IFBu1giXZJg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://wunder.io/articles/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/wunderio/silta" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Wunder</div></div></div></footer></div>
<script src="/silta/styles.749d1629.js"></script>
<script src="/silta/runtime~main.ff27403d.js"></script>
<script src="/silta/main.15a87802.js"></script>
<script src="/silta/1.df1c1e86.js"></script>
<script src="/silta/2.451d4a22.js"></script>
<script src="/silta/28.9f32c8de.js"></script>
<script src="/silta/31.b72e3071.js"></script>
<script src="/silta/935f2afb.83ee4e54.js"></script>
<script src="/silta/17896441.f83ef773.js"></script>
<script src="/silta/d1e7b103.4e305683.js"></script>
</body>
</html>